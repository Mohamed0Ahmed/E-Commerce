<section class="w-75 mx-auto p-5 bg-main-light main">
  <div class="rounded-4">
    <div class="d-flex justify-content-between first">
      <div>
        <h2 class="fw-bold py-3">Cart Shop</h2>
        <h2 class="fw-bold" *ngIf="numberOfItems === 0">Your cart is empty</h2>
      </div>
      <div *ngIf="numberOfItems != 0">
        <button
          class="btn btn-outline-success fw-bold"
          [routerLink]="['/checkout', cartDetails._id]"
        >
          Pay Online
        </button>
      </div>
    </div>
    <div *ngIf="numberOfItems != 0">
      <div class="d-flex justify-content-between contain">
        <p class="fw-bold py-3">
          Total price :
          <span class="text-main">
            {{ cartDetails.totalCartPrice | currency : " EGP " }}
          </span>
        </p>
        <p class="fw-bold">
          Number Of Items :
          <span class="text-main"> {{ numberOfItems }} </span>
        </p>
      </div>
    </div>
    <div
      class="row py-3 border-bottom"
      *ngFor="let item of cartDetails.products"
    >
      <div *ngIf="numberOfItems != 0" class="d-flex align-items-center contain">
        <div class="col-md-2">
          <img
            [src]="item.product.imageCover"
            [alt]="item.product.title"
            class="w-100"
          />
        </div>
        <div class="col-md-10 d-flex justify-content-between second">
          <div class="p-4 text-center">
            <h4 class="fw-bold">
              {{ item.product.title.split(" ").slice(0, 2).join(" ") }}
            </h4>
            <h6 class="fw-bold text-main">
              {{ item.price | currency : " EGP " }}
            </h6>
          </div>
          <div>
            <div class="d-flex align-items-center contain">
              <button
                class="fw-bold btn border border-success"
                (click)="updateCount(item.product._id, item.count + 1)"
              >
                +
              </button>
              <span class="px-2 h5 fw-bold"> {{ item.count }} </span>
              <button
                class="fw-bold btn border border-success"
                (click)="updateCount(item.product._id, item.count - 1)"
                [disabled]="item.count == 1"
              >
                -
              </button>
            </div>
            <div>
              <button
                class="text-danger btn"
                (click)="removeCartItem(item.product._id)"
              >
                <i class="fa-solid fa-trash"></i> Remove
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="text-center py-2" *ngIf="numberOfItems != 0">
      <button class="btn btn-outline-success fw-bold" (click)="clearCart()">
        Clear Your Cart
      </button>
    </div>
  </div>
</section>
